# 友元函数和友元类
这些函数不是类的一部分，但又需要频繁地访问类的数据成员，这时可以将这些函数定义为该函数的友元函数。除了友元函数外，还有友元类，两者统称为友元。友元的作用是提高了程序的运行效率（即减少了类型检查和安全性检查等都需要时间开销），但它破坏了类的封装性和隐藏性，使得非成员函数可以访问类的私有成员。
##  友元函数
友元函数是可以直接访问类的私有成员的非成员函数。它是定义在类外的普通函数，它不属于任何类，但需要在类的定义中加以声明，声明时只需在友元的名称前加上关键字friend，其格式如下：
```
friend  类型 函数名(形式参数);
```
## 友元类 
友元类的所有成员函数都是另一个类的友元函数，都可以访问另一个类中的隐藏信息（包括私有成员和保护成员）。      
当希望一个类可以存取另一个类的私有成员时，可以将该类声明为另一类的友元类。定义友元类的语句格式如下：
```
friend class 类名;
```
*  使用友元类时注意：
1. 友元关系不能被继承。
2. 友元关系是单向的，不具有交换性。若类B是类A的友元，类A不一定是类B的友元，要看在类中是否有相应的声明。
3. 友元关系不具有传递性。若类B是类A的友元，类C是B的友元，类C不一定是类A的友元，同样要看类中是否有相应的申明 

## 类模板友元
1. 实际类 插入 模板类(任意)
2. 实际类 插入 模板类实例化
3. 模板类A 插入 模板类B(任意)
4. 模板类A 插入 模板类B实例化
5. 模板类A 插入 模板类B(与模板类A相同)
code:
```cpp
#include<iostream>
#include<vector>
//animal 实例 接受ac的double vi 任意
//plant 模板 接受 ac 的double vi 任意
template <typename temp> class partner_vi;//partner template class virtual
template <typename temp> class partner_ac;//模板类实例化
//实际类 插入 模板类(任意) or 模板类实例化
class animal
{
  friend class partner_ac<double>;//模板类实例化
  template <typename X> friend class partner_vi;//partner类的所有实例化, 都为animal的友元
private:
  void print(){std::cout<<"class animal"<<std::endl;}
};

// 模板类A 插入 模板类B(任意) or 模板类B实例化 or 与模板类A相同实例化
template <typename type> class plant
{
  template <typename X> friend class partner_vi;//模板类B(任意)
  friend class partner_ac<double>;//模板类B实例化
  friend class partner_vi<type>;//与模板类A相同实例化
private:
  void print(){std::cout<<"class plant"<<std::endl;}
};
template <typename temp> class partner_vi
{
public:
  void print_animal(){std::cout<<"vi"<<std::endl;pig.print();}
  void print_plant_same(){std::cout<<"vi"<<std::endl;little_pig.print();}
  void print_plant(){std::cout<<"vi"<<std::endl;lili_pig.print();}
private:
  animal pig;
  plant<temp> little_pig;
  plant<std::vector<int> > lili_pig;//模板类(任意)
};

template <typename temp> class partner_ac
{
public:
  void print_animal(){std::cout<<"ac"<<std::endl;pig.print();}
  void print_plant(){std::cout<<"vi"<<std::endl;lili_pig.print();}
private:
  animal pig;
  plant<std::vector<int> > lili_pig;//模板类(任意)
};

int main()
{
  partner_ac<int> ac_int;
  // ac_int.print_animal();//报错, 访问了私有成员
  // ac_int.print_plant();//报错, 访问了私有成员
  partner_ac<double> ac_do;
  ac_do.print_animal();//animal successful 实际类  模板类实例化
  ac_do.print_plant();//plant successful 模板类 模板类实例化
  partner_vi<int> vi_int;
  vi_int.print_animal();//animal successful 实际类  模板类(任意)
  vi_int.print_plant();//plant successful 模板类 模板类(任意)
  vi_int.print_plant_same();//plant successful 模板类 模板类(相同)
}
```
